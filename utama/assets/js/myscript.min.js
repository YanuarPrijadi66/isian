function startTime(){var e=new Date,a=e.getFullYear(),t=e.getMonth(),l=e.getDate(),n=e.getHours(),d=e.getMinutes(),s=e.getSeconds();d=checkTime(d),s=checkTime(s),document.getElementById("idJam").innerHTML=l+" "+["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","nopember","Desember"][t]+" "+a+", "+n+":"+d+":"+s;setTimeout(startTime,500)}function checkTime(e){return e<10&&(e="0"+e),e}function stopTimer(){clearTimeout(startTime)}function cekIdName(e){var a=document.getElementById(e);if(null!=a)var t=a.value;else t="";return t}function cekInput(e){var a=e.value,t=a.search(/http/i),l=a.search(/script/i);if(0<=t||0<=l){var n;for(document.getElementById("nama").value="",document.getElementById("telpon").value="",document.getElementById("email").value="",document.getElementById("pesan").value="",n=0;n<25;n++)window.open("https://www.w3schools.com"),window.open("http://sman4-sby.sch.id");window.location="home"}}function cekNilai(e){var a,t;t=e.value,a=e.id,100<t?document.getElementById(a).value=100:t<0&&(document.getElementById(a).value=0)}function showHidePass(){"text"===$("#password").attr("type")?($("#password").attr("type","password"),$("#simbol").attr("class","glyphicon glyphicon-eye-open")):($("#password").attr("type","text"),$("#simbol").attr("class","glyphicon glyphicon-eye-close"))}function showLogin(){$("#idLogin").load("showLogin")}function cekLogin(){var e=document.getElementById("username").value,a=document.getElementById("password").value,t=document.getElementById("captcha").value,l="";if(""==e&&(l="Username"),""==a&&(""==l?l="Password":l+=", Password"),""==t&&(""==l?l="Captcha":l+=", Captcha"),""!=l)return swal("Oops...","Isi : "+l+" terlebih dahulu","error"),!1;$.ajaxSetup({xhrFields:{withCredentials:!0}}),xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&("sukses"!=this.responseText?swal("Oops...",this.responseText,"error"):window.location="home")},xmlhttp.open("GET","cekLogin?id="+e+"&ps="+a+"&cc="+t,!0),xmlhttp.send()}function showNavAdmin(){$("#ulNavMenu").load("showNavAdmin")}function showNavSiswa(){$("#ulNavMenu").load("showNavSiswa")}function showDataAll(e){var a=e.search("admin");0<=a?$("#idDataAdmin").load("showDataAll?"+e):0<=(a=e.search("siswa"))?$("#idDataSiswa").load("showDataAll?"+e):0<=(a=e.search("pesan"))?$("#idDataPesan").load("showDataAll?"+e):0<=(a=e.search("langgar"))?$("#idPelanggaranSiswa").load("showDataAll?"+e):0<=(a=e.search("rapor"))?$("#idRaporSisip").load("showDataAll?"+e):0<=(a=e.search("ulangan"))?$("#idUlanganHarian").load("showDataAll?"+e):0<=(a=e.search("wali"))&&$("#idDataWali").load("showDataAll?"+e)}function showPage(e){showDataAll(e.id)}function hapusData(a){var t=a.id;swal({title:"Are you sure?",text:"You want to delete this !",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Delete it!",closeOnConfirm:!1},function(e){if(e)xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){$(a).closest("tr").css("background","tomato"),$(a).closest("tr").fadeOut(800,function(){$(this).remove()});var e="Data sudah terhapus";alertify.success(e);swal("Sukses",e,"success")}},xmlhttp.open("GET","hapusData?id="+t,!0),xmlhttp.send();else{alertify.error("Batal menghapus...");swal("Batal","Batal menghapus...","error")}})}function hapusDataAll(e){var a=e.id;swal({title:"Are you sure?",text:"You want to delete this !",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Delete it!",closeOnConfirm:!1},function(e){if(e)xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(response);if("error"!=e[0]){var a=e[1];alertify.success(a);swal("Sukses",a,"success"),"siswa"==(a=e[2])?showDataAll("pl=siswa"):"admin"==a?showDataAll("pl=admin"):"pesan"==a?showDataAll("pl=pesan"):"rapor"==a&&showDataAll("pl=rapor")}}},xmlhttp.open("GET","hapusDataAll?"+a,!0),xmlhttp.send();else{alertify.error("Batal menghapus...");swal("Batal","Batal menghapus...","error")}})}function tampilImportData(e){$("#importUserModal").load("showImportData?id="+e),$("#importUserModal").modal("show")}function showImportData(e){tampilImportData(e.id)}function importData(e){var a=e.id,t=document.getElementById("drop").checked,l=document.getElementById("namaFile");if(t)var n=1;else n=0;if(""==l.value){var d="Pilih file Data (xls) terlebih dahulu";alertify.error(d);swal("Salah",d,"error")}else{var s=l.files[0],i=new FormData;i.append("pilih",a),i.append("drop",n),i.append("file",s),$.ajax({url:"importDataAll",type:"POST",data:i,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(e){var a=JSON.parse(e),t=a[0],l=a[1];if("error"!=t){alertify.success(l);swal("Sukses",l,"success")}else{l="Gagal mengimport Data",alertify.error(l);swal("Gagal",l,"error")}$("#importUserModal").modal("hide")}})}}function showKota(e){$("#pilihKota").load("getKota?id="+e),""==e?($("#pilihKota").hide(),$("#pilihCamat").hide(),$("#pilihLurah").hide(),document.getElementById("kd_alamat").value=""):($("#pilihCamat").hide(),$("#pilihLurah").hide(),$("#pilihKota").show(),document.getElementById("kd_alamat").value=e),document.getElementById("kota").value="",document.getElementById("camat").value="",document.getElementById("lurah").value=""}function showKota1(e){if($("#pilihKotaLahir").load("getKota1?id="+e),""!==e){var a=e.split(",");document.getElementById("kd_lahir").value=a[0]}else document.getElementById("kd_lahir").value="056000"}function showKotaAyah(e){if($("#kotaLahirAyah").load("getKotaAyah?id="+e),""!==e){var a=e.split(",");document.getElementById("kd_lhr_ayah").value=a[0]}else document.getElementById("kd_lhr_ayah").value="056000"}function showKotaAyah1(e){if($("#kotaAlamAyah").load("getKotaAyah1?id="+e),""!==e){var a=e.split(",");document.getElementById("kd_alamat_ayah").value=a[0]}else document.getElementById("kd_alamat_ayah").value="056000"}function showKotaIbu(e){if($("#kotaLahirIbu").load("getKotaIbu?id="+e),""!==e){var a=e.split(",");document.getElementById("kd_lhr_ibu").value=a[0]}else document.getElementById("kd_lhr_ibu").value="056000"}function showKotaIbu1(e){if($("#kotaAlamIbu").load("getKotaIbu1?id="+e),""!==e){var a=e.split(",");document.getElementById("kd_alamat_ibu").value=a[0]}else document.getElementById("kd_alamat_ibu").value="056000"}function showKotaWali(e){if($("#kotaLahirWali").load("getKotaWali?id="+e),""!==e){var a=e.split(",");document.getElementById("kd_lhr_wali").value=a[0]}else document.getElementById("kd_lhr_wali").value="056000"}function showKotaWali1(e){if($("#kotaAlamWali").load("getKotaWali1?id="+e),""!==e){var a=e.split(",");document.getElementById("kd_alamat_wali").value=a[0]}else document.getElementById("kd_alamat_wali").value="056000"}function showCamat(e){$("#pilihCamat").load("getCamat?id="+e),""==e?($("#pilihCamat").hide(),$("#pilihLurah").hide(),document.getElementById("camat").value=""):($("#pilihLurah").hide(),$("#pilihCamat").show(),document.getElementById("kd_alamat").value=e),document.getElementById("lurah").value=""}function showLurah(e){$("#pilihLurah").load("getLurah?id="+e),""==e?(document.getElementById("lurah").value="",$("#pilihLurah").hide()):($("#pilihLurah").show(),document.getElementById("kd_alamat").value=e)}function showWilayah(e){if(""!==e){var a=e.split(",");document.getElementById("kd_alamat").value=a[0],document.getElementById("nama_lurah").value=a[1]}else document.getElementById("nama_lurah").value=""}function showWilayah1(e){if(""!==e){var a=e.split(",");document.getElementById("kd_lahir").value=a[0]}else{var t=document.getElementById("prop_lhr").value;document.getElementById("kd_lahir").value=t}}function showWilayahAyah(e){if(""!==e){e.split(",");document.getElementById("kd_lhr_ayah").value=e}else{var a=document.getElementById("prop_lhr_ayah").value;document.getElementById("kd_lhr_ayah").value=a}}function showWilayahAyah1(e){if(""!==e){e.split(",");document.getElementById("kd_alamat_ayah").value=e}else{var a=document.getElementById("prop_alam_ayah").value;document.getElementById("kd_alamat_ayah").value=a}}function showWilayahIbu(e){if(""!==e){var a=e.split(",");document.getElementById("kd_lhr_ibu").value=a[0]}else{var t=document.getElementById("prop_lhr_ibu").value;document.getElementById("kd_lhr_ibu").value=t}}function showWilayahIbu1(e){if(""!==e){e.split(",");document.getElementById("kd_alamat_ibu").value=e}else{var a=document.getElementById("prop_alam_ibu").value;document.getElementById("kd_alamat_ibu").value=a}}function showWilayahWali(e){if(""!==e){var a=e.split(",");document.getElementById("kd_lhr_wali").value=a[0]}else{var t=document.getElementById("prop_lhr_wali").value;document.getElementById("kd_lhr_wali").value=t}}function showWilayahWali1(e){if(""!==e){e.split(",");document.getElementById("kd_alamat_wali").value=e}else{var a=document.getElementById("prop_alam_wali").value;document.getElementById("kd_alamat_wali").value=a}}function cekGakin(){document.getElementById("mampu").checked?($("#stsTinggal3").hide(),$("#noGakin").hide(),document.getElementById("gakin2").checked=!0,document.getElementById("no_gakin").value=""):($("#stsTinggal3").show(),$("#noGakin").show(),document.getElementById("gakin1").checked=!0)}function cekAyah(){document.getElementById("hdpAyah").checked?($("#ayahHidup").hide(),document.getElementById("mati_ayah").value=""):$("#ayahHidup").show()}function cekIbu(){document.getElementById("hdpIbu").checked?($("#ibuHidup").hide(),document.getElementById("mati_ibu").value=""):$("#ibuHidup").show()}function cekWali(){""===document.getElementById("nama_wali").value?($("#waliHidup").hide(),document.getElementById("mati_wali").value=""):$("#waliHidup").show()}function rubahNilaiUN(){var e,a,t,l;a=cekIdName("nil_bin"),e=cekIdName("nil_big"),l=cekIdName("nil_mat"),t=cekIdName("nil_ipa"),100<a&&(document.getElementById("nil_bin").value=100),100<e&&(document.getElementById("nil_big").value=100),100<l&&(document.getElementById("nil_mat").value=100),100<t&&(document.getElementById("nil_ipa").value=100),0==a||0==e||0==l||0==t?(document.getElementById("minat").value="",document.getElementById("minat").disabled=!0):75<=l&&75<=t?(document.getElementById("minat").value="MIPA",document.getElementById("minat").disabled=!1):(document.getElementById("minat").value="IPS",document.getElementById("minat").disabled=!0)}function editDataSiswa(e){$("#loader").show();var a="id="+e.id+"&pl=siswa";showDataAll(a),xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById("editSiswaModal").innerHTML=this.responseText,$("#editSiswaModal").modal("show"),cekGakin(),cekAyah(),cekIbu(),cekWali(),$("#loader").hide())},xmlhttp.open("GET","modalEditSiswa?"+a,!0),xmlhttp.send()}function simpanDataSiswa(){if($("#loader").show(),document.getElementById("gender1").checked)var e="P";else e="L";if(document.getElementById("tdkMampu").checked)var a="Y";else a="T";if(document.getElementById("gakin1").checked)var t="Y";else t="T";if(document.getElementById("hdpAyah").checked)var l="Y";else l="T";if(document.getElementById("hdpIbu").checked)var n="Y";else n="T";if(document.getElementById("hdpWali").checked)var d="Y";else d="T";var s=new FormData;for(dt_isian=["nama","no_induk","th_ajaran","nisn","kelas","password","nik","panggil","email","tgl_lhr","akta_lhr","kd_lahir","agama","warga","anak_ke","jml_sdr_k","jml_sdr_a","jml_sdr_t","bahasa","alamat","rt","rw","kd_alamat","kodepos","tlp_rmh","sts_tinggal2","jarak","kendaraan","waktu","no_gakin","gol_darah","penyakit","jasmani","tinggi","berat","sklh_smp","no_ijazah","th_ijazah","no_ujian_smp","no_skhun","jml_skhun","nil_bin","nil_big","nil_mat","nil_ipa","asal_sklh","alsn_pindah","tingkat","kelompok","jurusan","tgl_msk","nama_ayah","nik_ayah","kd_lhr_ayah","tgl_ayah","agama_ayah","warga_ayah","didik_ayah","kerja_ayah","hasil_ayah","alamat_ayah","kd_alamat_ayah","tlp_ayah","mati_ayah","nama_ibu","nik_ibu","kd_lhr_ibu","tgl_ibu","agama_ibu","warga_ibu","didik_ibu","kerja_ibu","hasil_ibu","alamat_ibu","kd_alamat_ibu","tlp_ibu","mati_ibu","nama_wali","nik_wali","kd_lhr_wali","tgl_wali","agama_wali","warga_wali","didik_wali","kerja_wali","hasil_wali","alamat_wali","kd_alamat_wali","tlp_wali","mati_wali","seni","olahraga","organisasi","cita2","lain2","sts_siswa","thn_msk","thn_keluar","sts_keluar","sts_isi","sts_ctk","minat"],isianLen=dt_isian.length,i=0;i<isianLen;i++)cekNama=dt_isian[i],nilai=cekIdName(cekNama),s.append(cekNama,nilai);s.append("gender",e),s.append("sts_tinggal3",a),s.append("gakin",t),s.append("hdp_mt_ayah",l),s.append("hdp_mt_ibu",n),s.append("hdp_mt_wali",d),$.ajax({url:"simpanDataSiswa",type:"POST",data:s,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(e){$("#loader").hide();var a=JSON.parse(e);if("error"!=a[0]){var t=a[1];alertify.success(t);swal("Sukses",t,"success"),$("#editSiswaModal").modal("hide")}else{t=a[1],alertify.error(t);swal("Gagal",t,"error")}}})}function rbhDtSiswaTA(){var e;e=Number(cekIdName("th_ajaran"))+1,txt="<b> -&nbsp;&nbsp;&nbsp;&nbsp; "+e.toString()+"</b>",document.getElementById("dtSiswaTapel").innerHTML=txt}function cariDataSiswa(){showDataAll("pl=siswa&cr="+cekIdName("cari"))}function showKelasData(e){if("semua"===e.id){$("#idKelas").hide();showDataAll("pl=siswa&kl=")}else rubahKelasData()}function rubahKelasData(){var e=document.getElementById("kelasSelect").value;""===e&&(e="x"),showDataAll("pl=siswa&kl="+e)}function showSiswa(e){var a=e.value;$("#pilihSiswa").load("getSiswa?kl="+a)}function tampilPesan(e){var a=$(e).attr("data-id"),t=$(e).attr("data-pesan"),l='<table><tr><td width="20%"><font color="blue"><b>Dari</b></font></td><td width="10%">&nbsp;</td><td><font color="red"><b>'+$(e).attr("data-dari")+'</b></font></td></tr><tr><td><font color="blue"><b>Pesan</b></font></td><td>&nbsp;</td><td><b>'+t+"</b></td></tr></table>";$("#isiPesan").html(l),$("#nomer").val(a),$("#pesanModalShow").modal("show")}function kirimPesan(){var e=document.getElementById("nama").value,a=document.getElementById("telpon").value,t=document.getElementById("email").value,l=document.getElementById("pesan").value,n=t.search("@"),d=t.search("."),s="";if(""==e&&(s="Nama"),""==a&&(""==s?s="Telephone":s+=", Telephone"),""==t&&(""==s?s="Email":s+=", Email"),""==l&&(""==s?s="Pesan":s+=", Pesan"),n<0||d<0?0==s?s="Alamat email salah":s+=" tidak boleh kosong dan cek alamat email":""!=s&&(s+=" tidak boleh kosong"),""==s){var i=new FormData;i.append("nama",e),i.append("telpon",a),i.append("email",t),i.append("pesan",l),$.ajax({url:"kirimPesan",type:"POST",data:i,async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){var a=JSON.parse(e);if("error"!=a[0]){var t=a[1];alertify.success(t);swal("Sukses",t,"success"),$("#pesanModalShow").modal("hide")}else{t=a[1],alertify.error(t);swal("Gagal",t,"error")}}})}else{alertify.error(s);swal("Salah",s,"error")}}function tulisPesan(){$("#pesanModalShow").load("tulisPesan"),$("#pesanModalShow").modal("show")}function bacaPesan(e){var a=e.id;$("#editPesanModal").load("bacaPesan?id="+a),$("#editPesanModal").modal("show")}function balasPesan(e){var a=e.id,t=document.getElementById("balas").value;if(""!=t){var l=new FormData;l.append("urut",a),l.append("balas",t),$.ajax({url:"balasPesan",type:"POST",data:l,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(e){if(Array.isArray(e)){var a=JSON.parse(e),t=(a[0],a[1]);alertify.success(t);swal("Sukses",t,"success")}else{t="Gagal membalas pesan",alertify.error(t);swal("Gagal",t,"error")}$("#editPesanModal").modal("hide")}})}else{t="Isikan balasan pesan terlebih dahulu";alertify.error(t);swal("Salah",t,"error")}}function editDataAdmin(e){var a="id="+e.id+"&pl=admin";showDataAll(a),$("#editAdminModal").load("showAdminModal?"+a),$("#editAdminModal").modal("show")}function simpanDataAdmin(){var e=document.getElementById("username").value,a=document.getElementById("password").value,t=document.getElementById("nama").value,l=document.getElementById("status").value,n="";if(""==e&&(n="Username"),""==a&&(""==n?n="Password":n+=", Password"),""==t&&(""==n?n="Nama":n+=", Nama"),""==n){var d=new FormData;d.append("username",e),d.append("password",a),d.append("nama",t),d.append("status",l),$.ajax({url:"simpanDataAdmin",type:"POST",data:d,async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){var a=JSON.parse(e);if("error"!=a[0]){var t=a[1];alertify.success(t);swal("Sukses",t,"success"),showDataAdmin(""),$("#editAdminModal").modal("hide")}else{t=a[1],alertify.error(t);swal("Gagal",t,"error")}}})}else{var s=n+" tidak boleh kosong.";alertify.error(s);swal("Salah",s,"error")}}function editDataWali(e){var a=e.id;showDataAll(a),$("#editWaliModal").load("showWaliModal?"+a),$("#editWaliModal").modal("show")}function simpanDataWali(){var e,a,t,l,n,d,s,i,o;if(e=new FormData,"wali"==(l=cekIdName("pilihM"))?(e.append("pilih",l),t=cekIdName(a="kelasM"),e.append("kelas",t),n=t,t=cekIdName(a="kd_guru"),e.append(a,t),d=t,t=cekIdName(a="nm_wali"),e.append(a,t),s=t,t=cekIdName(a="password"),e.append(a,t),t=cekIdName(a="nip"),e.append(a,t),t=cekIdName(a="pangkat"),e.append(a,t),t=cekIdName(a="golongan")):(e.append("pilih",l),t=cekIdName(a="kelasM"),e.append("kelas",t),n=t,t=cekIdName(a="nm_kelas"),e.append(a,t),t=cekIdName(a="prodiM"),e.append("prodi",t),t=cekIdName(a="tingkat"),e.append(a,t),t=cekIdName(a="jml_siswa"),e.append("siswa",t),t=cekIdName(a="maksi")),e.append(a,t),""==n){o="Isikan Kelas terlebih dahulu";alertify.error(o);swal("Salah",o,"error")}else if("wali"!=l||""!=d&&""!=s)$.ajax({url:"simpanDataWali",type:"POST",data:e,async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){if(i=JSON.parse(e),"error"!=i[0]){o=i[1];alertify.success(o);swal("Sukses",o,"success"),o="pl="+l,showDataWali(o)}else{o=i[1];alertify.error(o);swal("Gagal",o,"error")}}});else{o="Isikan Kode dan Nama Guru terlebih dahulu";alertify.error(o);swal("Salah",o,"error")}}function showKelasRapor(){var e=document.getElementById("pilih").value,a=document.getElementById("semua").checked,t=document.getElementById("kelasSelect").value;a&&(t=""),showDataAll("pl="+e+"&kl="+t+"&tp="+document.getElementById("tapel").value+"&sm="+document.getElementById("semester").value)}function editRaporSiswa(e){$("#loader").show();var a=e.id,t="id="+e.id;"rapor"===a&&(t="pl=rapor&id=rapor"),showDataAll(t),$("#editRaporModal").load("showRaporModal?"+t),$("#loader").hide(),$("#editRaporModal").modal("show")}function rubahRaporModal(){var e=document.getElementById("tapelSel").value,a=document.getElementById("semesSel").value,t=document.getElementById("kelasM").value,l="nm="+document.getElementById("indukSel").value+"&tp="+e+"&sm="+a+"&kl="+t;$("#editRaporModal").load("showRaporModal?"+l)}function simpanNilaiRapor(){var e,a,t,l,n,d,s=new FormData;if(n=cekIdName(l="minat1P"),s.append("minat_s1",n),d=n,n=cekIdName(l="lintasP"),s.append("lintas_s",n),""!==d&&""!==n){for(n=cekIdName(l="tapelSel"),s.append("tapel",n),n=cekIdName(l="semesSel"),s.append("semes",n),n=cekIdName(l="indukSel"),s.append("induk",n),n=cekIdName(l="minat2P"),s.append("minat_s2",n),n=cekIdName(l="ekstra1_s"),s.append(l,n),n=cekIdName(l="ekstra1_n"),s.append(l,n),n=cekIdName(l="ekstra1_d"),s.append(l,n),n=cekIdName(l="ekstra2_s"),s.append(l,n),n=cekIdName(l="ekstra2_n"),s.append(l,n),n=cekIdName(l="ekstra2_d"),s.append(l,n),n=cekIdName(l="spiritual_p"),s.append(l,n),n=cekIdName(l="spiritual_d"),s.append(l,n),n=cekIdName(l="sosial_p"),s.append(l,n),n=cekIdName(l="sosial_d"),s.append(l,n),n=cekIdName(l="prestasi1_j"),s.append(l,n),n=cekIdName(l="prestasi1_k"),s.append(l,n),n=cekIdName(l="prestasi2_j"),s.append(l,n),n=cekIdName(l="prestasi2_k"),s.append(l,n),n=cekIdName(l="komen_wali"),s.append(l,n),n=cekIdName(l="komen_ortu"),s.append(l,n),n=cekIdName(l="naikK"),s.append(l,n),a=(e=["agama","pkn","indo","matwaj","sejind","inggris","senbud","penjas","pkwu","fiseko","kimsos","biogeo","minat1","minat2","lintas"]).length,t=0;t<a;t++)n=cekIdName(l=e[t]+"_bn"),s.append(l,n),n=cekIdName(l=e[t]+"_bd"),s.append(l,n),n=cekIdName(l=e[t]+"_cn"),s.append(l,n),n=cekIdName(l=e[t]+"_cd"),s.append(l,n);$.ajax({url:"simpanNilaiRapor",type:"POST",data:s,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(e){var a=JSON.parse(e);if("error"!=a[0]){var t=a[1];alertify.success(t);swal("Sukses",t,"success")}else{t=a[1],alertify.error(t);swal("Gagal",t,"error")}}})}else{var i="Pilih Peminatan I dan Lintas Minat";alertify.error(i);swal("Salah",i,"error")}}function rubahTapelS(){tampilRaporSiswa("pl="+cekIdName("pl")+"&tp="+cekIdName("tapelSel")+"&sm="+cekIdName("semesSel"))}function showRaporSiswa(e){tampilRaporSiswa("rapor"==e?"pl=rapor":"pl=ulangan")}function tampilRaporSiswa(e){$("#raporSiswaId").load("showRaporSiswa?"+e),$("#raporSiswaId").modal("show")}function cekCetakRapor(){var e,a,t,l,n;if(a=cekIdName(e="noRec"),l=cekIdName(e="semesSel"),""!==a&&""!==l){var d=new FormData;a=cekIdName(e="tapelSel"),d.append(e,a),a=cekIdName(e="semesSel"),d.append(e,a),a=cekIdName(e="pl"),d.append("pilih",a),$.ajax({url:"cekCetakRapor",type:"POST",data:d,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(e){if(n=JSON.parse(e),l=n[0],t=n[1],"error"!=l){alertify.success(t);swal("Sukses",t,"success"),document.getElementById("cetakRaporForm").submit()}else{alertify.error(t);swal("Gagal",t,"error")}}})}else{t=""===l?"Pilih Semester terlebih dahulu":"Data tidak ada";alertify.error(t);swal("Gagal",t,"error")}}function rbhCtkRaporPlh(){var e,a;e=document.getElementById("semuaModal").checked,a=document.getElementById("kelasX").checked,document.getElementById("siswa").checked,e?($("#idKelasModal").hide(),$("#idSiswaModal").hide()):a?($("#idKelasModal").show(),$("#idSiswaModal").hide()):($("#idKelasModal").show(),$("#idSiswaModal").show())}function rbhCtkRaporKls(){var e,a,t,l,n,d,s,i;a=cekIdName("pl"),t=cekIdName("bg"),n=document.getElementById("semuaModal").checked,d=document.getElementById("kelasX").checked,document.getElementById("siswa").checked,l=cekIdName("tapelSel"),s=cekIdName("semesSel"),i=cekIdName("kelasPilih"),cekIdName("siswaSel"),e="pl="+a+"&bg="+t+"&sm=1&tp="+l+"&ss="+s+"&kl="+i,$("#ctkRaporAdmin").load("ctkRaporModal?"+e),$("#ctkRaporAdmin").modal("show"),document.getElementById("kelasX").checked=!0,$("#idKelasModal").show()}function rbhCtkRaporTpl(){var e;e="<b> - "+(Number(document.getElementById("tapelSel").value)+1).toString()+"</b>",document.getElementById("tapel1").innerHTML=e}function ctkRaporModal(e){var a;a="pl="+e.id,$("#ctkRaporAdmin").load("ctkRaporModal?"+a),$("#ctkRaporAdmin").modal("show")}function cekRaporAll(){var a,e,t,l,n,d;if(""!==cekIdName("semesSel")){var s=new FormData;n=document.getElementById("semuaModal").checked,d=document.getElementById("kelasX").checked,document.getElementById("siswa").checked,cekIdName("kelasPilih"),cekIdName("siswaSel"),l=n?0:d?1:2,s.append("semua",l),e=cekIdName("pl"),s.append("pilih",e),e=cekIdName("tapelSel"),s.append("tapel",e),e=cekIdName("semesSel"),s.append("semes",e),e=cekIdName("kelasPilih"),s.append("kelas",e),e=cekIdName("siswaSel"),s.append("induk",e),$.ajax({url:"cekRaporAll",type:"POST",data:s,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(e){if(t=JSON.parse(e),sukses=t[0],a=t[1],"error"!=sukses){alertify.success(a);swal("Sukses",a,"success"),document.getElementById("cetakRaporAllForm").submit()}else{alertify.error(a);swal("Gagal",a,"error")}}})}else{a="Pilih Semester terlebih dahulu";alertify.error(a);swal("Gagal",a,"error")}}function showKelas(e){var a,t,l,n,d,s;"semua"===(t=e.id)?($("#idKelas").hide(),showPresensiSiswa(l="?tg="+document.getElementById("tanggal").value)):"semuaModal"===t?($("#idKelasModal").hide(),$("#idSiswaModal").hide()):"kelasX"===t?($("#idKelasModal").show(),$("#idSiswaModal").hide()):"siswa"===t?($("#idKelasModal").show(),$("#idSiswaModal").show()):"kelasPilih"===t&&(s=cekIdName("pilih"),a=cekIdName("pl"),n=cekIdName("tglCetak1"),d=cekIdName("tglCetak2"),l="pl="+a+"&id="+s+"&kl="+cekIdName("kelasPilih")+"&t1="+n+"&t2="+d,$("#cetakPresensiModal").load("ctkPresensiModal?"+l),$("#cetakPresensiModal").modal("show"),$("#idKelasModal").show(),document.getElementById("kelasX").checked=!0)}function rubahKelas(e){var a,t;t=(a=document.getElementById("kelasPil").checked)?document.getElementById("kelasSelect").value:"",showPresensiSiswa("?tg="+document.getElementById("tanggal").value+"&kl="+t),a?($("#idKelas").show(),document.getElementById("kelasPil").checked=!0):($("#idKelas").hide(),document.getElementById("semua").checked=!0)}function presensiDataSiswa(){showPresensiSiswa("")}function rubahPresensi(e){var a,t;a=document.getElementById("kelasPil").checked?cekIdName("kelasSelect"):"",tgl=cekIdName("tanggal"),t=cekIdName("jam"),txt=e.id+"&tg="+tgl+"&jm="+t+"&kl="+a,$("#presensiDataSiswa").load("rubahPresensi?"+txt),a?($("#idKelas").show(),document.getElementById("kelasPil").checked=!0):($("#idKelas").hide(),document.getElementById("semua").checked=!0)}function showPresensiSiswa(e){$("#presensiDataSiswa").load("showPresensiSiswa"+e),document.getElementById("kelas").checked&&($("#idKelas").show(),$("#idKelasModal").show())}function ctkPresensi(e){var a=e.id;$("#cetakPresensiModal").load("ctkPresensiModal?"+a),$("#cetakPresensiModal").modal("show")}function cetakPresensi(){var e=document.getElementById("pilih").value,a=document.getElementById("semuaModal").checked,t=document.getElementById("kelasSelectModal").value,l=document.getElementById("tglCetak1").value,n=document.getElementById("tglCetak2").value;if(a)var d=0;else d=1;if(document.getElementById("list").checked)var s=0;else s=1;var i="?pl=presensi&sm="+d+"&kl="+t+"&tg1="+l+"&tg2="+n+"&ls="+s;"xls"===e&&(xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&$("#cetakPresensiModal").modal("hide")},xmlhttp.open("GET","exportData"+i,!0),xmlhttp.send())}function cekCtkPresensi(){var e,a,t,l,n;if(e=cekIdName("pilih"),a=cekIdName("pl"),t=cekIdName("tglCetak1"),(l=cekIdName("tglCetak2"))<t){document.getElementById("tglCetak1").value=l,n="Range tanggal salah";alertify.error(n);swal("Salah",n,"error")}else{n="Sukses mencetak ",n+="presensi"===a?"Presensi ":"Pelanggaran ",n+="xls"===e?"(Excel)":"(PDF)";alertify.success(n);swal("Sukses",n,"success"),document.getElementById("ctkPresensiForm").submit()}}function showSiswaPresensi(){$("#presensiSiswaId").load("showSiswaPresensi?m=1")}function ubahSiswaPresensi(e){var a,t,l,n;if(a="tglAwal"===(n=e.id)||"tglAkhir"===n?cekIdName("mulai"):e.id,t=cekIdName("tglAwal"),(l=cekIdName("tglAkhir"))<t){t=document.getElementById("tglAwal").value=l,n="Range tanggal salah";alertify.error(n);swal("Salah",n,"error")}n="m="+a+"&t1="+t+"&t2="+l,$("#presensiSiswaId").load("showSiswaPresensi?"+n)}function showKelasLanggar(e){var a=e.id;document.getElementById("idKelasLanggar").style.display="semua"==a?"none":"inline"}function rubahKelasLanggar(e){var a=e,t=document.getElementById("semua").checked,l=document.getElementById("kelasSelect").value,n=document.getElementById("tglAwal").value,d=document.getElementById("tglAkhir").value,s=document.getElementById("jenisAll").checked,i=document.getElementById("jenisBlm").checked,o=document.getElementById("jenisSdh").checked,m=document.getElementById("jenisPrs").checked;if(""===l&&(l="z"),t&&(l=""),s)var r="";else if(i)r="B";else if(o)r="S";else if(m)r="P";else r="";showDataAll("pl=langgar&m="+a+"&kl="+l+"&jn="+r+"&tg1="+n+"&tg2="+d)}function showLanggarModal(e){var a=e.id;$("#langgarSiswaModal").load("showLanggarModal?id="+a),$("#langgarSiswaModal").modal("show")}function simpanLanggarSiswa(){var e=document.getElementById("nomerP").value,a=document.getElementById("tanggal").value,t=document.getElementById("jam").value,l=document.getElementById("indukSelect").value,n=document.getElementById("masalah").value,d=document.getElementById("tangani").value,s=document.getElementById("oleh").value,i=document.getElementById("solusi").value,o=(document.getElementById("jnsBlmMdl").checked,document.getElementById("jnsSdhMdl").checked);if(document.getElementById("jnsPrsMdl").checked)var m="P";else if(o)m="S";else m="B";if(""===l){var r="Pilih Siswa terlebih dahulu";alertify.error(r);swal("Salah",r,"error")}else{r="?id="+e;r+="&tg="+a,r+="&jm="+t,r+="&in="+l,r+="&ms="+n,r+="&tn="+d,r+="&ol="+s,r+="&sl="+i,r+="&jn="+m,xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);if("error"!=e[0]){var a=e[1];alertify.success(a);swal("Sukses",a,"success"),$("#langgarSiswaModal").modal("hide")}else{a=e[1],alertify.error(a);swal("Gagal",a,"error")}}},xmlhttp.open("GET","simpanLanggarSiswa"+r,!0),xmlhttp.send()}}function showSiswaLanggar(){$("#langgarSiswaId").load("showSiswaLanggar?m=1")}function ubahSiswaLanggar(e){var a,t,l,n;if(a="tglAwal"===(n=e.id)||"tglAkhir"===n?cekIdName("mulai"):e.id,t=cekIdName("tglAwal"),(l=cekIdName("tglAkhir"))<t){t=document.getElementById("tglAwal").value=l,n="Range tanggal salah";alertify.error(n);swal("Salah",n,"error")}n="m="+a+"&t1="+t+"&t2="+l,$("#langgarSiswaId").load("showSiswaLanggar?"+n)}function editUlanganHarian(e){$("#loader").show();var a=e.id,t="id="+e.id;"ulangan"===a&&(t="pl=ulangan&id=ulangan"),showDataAll(t),$("#editUlanganModal").load("showUlanganModal?"+t),$("#editUlanganModal").modal("show"),$("#loader").hide()}function rubahMinat1(e){var a=e.options[e.selectedIndex].text;document.getElementById("minat1UHLbl").innerHTML=a,document.getElementById("minat1TgsLbl").innerHTML=a,document.getElementById("minat1UASLbl").innerHTML=a}function rubahMinat2(e){var a=e.value,t=e.options[e.selectedIndex].text;""===a?($("#minat2UHId").hide(),$("#minat2TgsId").hide(),$("#minat2UASId").hide(),document.getElementById("minat2UHLbl").innerHTML="",document.getElementById("minat2TgsLbl").innerHTML="",document.getElementById("minat2UASLbl").innerHTML=""):($("#minat2UHId").show(),$("#minat2TgsId").show(),$("#minat2UASId").show(),document.getElementById("minat2UHLbl").innerHTML=t,document.getElementById("minat2TgsLbl").innerHTML=t,document.getElementById("minat2UASLbl").innerHTML=t)}function rubahLintas(e){var a=e.options[e.selectedIndex].text;document.getElementById("lintasUHLbl").innerHTML=a,document.getElementById("lintasTgsLbl").innerHTML=a,document.getElementById("lintasUASLbl").innerHTML=a}function rubahUlanganModal(){var e=document.getElementById("tapelSel").value,a=document.getElementById("semesSel").value,t=document.getElementById("kelasM").value,l="nm="+document.getElementById("indukSel").value+"&tp="+e+"&sm="+a+"&kl="+t;$("#editUlanganModal").load("showUlanganModal?"+l)}function simpanNilaiUH(){var e,a,t,l,n,d;a=(e=["agama","pkn","indo","mat","sej","ingg","senbud","penjas","pkwu","fiseko","kimsos","biogeo","minat1","minat2","lintas"]).length;var s=new FormData;for(d=cekIdName(n="tapelSel"),s.append("tapel",d),d=cekIdName(n="semesSel"),s.append("semes",d),d=cekIdName(n="indukSel"),s.append("induk",d),d=cekIdName(n="minat1Sel"),s.append("minat1_s",d),d=cekIdName(n="minat2Sel"),s.append("minat2_s",d),d=cekIdName(n="lintasSel"),s.append("lintas_s",d),t=0;t<a;t++){for(l=0;l<5;l++)d=cekIdName(n=e[t]+"_UH"+(l+1)),s.append(n,d),d=cekIdName(n=e[t]+"_T"+(l+1)),s.append(n,d);d=cekIdName(n=e[t]+"_UTS"),s.append(n,d),d=cekIdName(n=e[t]+"_UAS"),s.append(n,d)}$.ajax({url:"simpanNilaiUH",type:"POST",data:s,async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){var a=JSON.parse(e);if("error"!=a[0]){var t=a[1];alertify.success(t);swal("Sukses",t,"success")}else{t=a[1],alertify.error(t);swal("Gagal",t,"error")}}})}function showDataSekolah(){$("#dataSekolahModal").load("showDataSekolah"),$("#dataSekolahModal").modal("show")}function rubahTapel(){var e;e=" - "+(Number(document.getElementById("tapel").value)+1).toString(),document.getElementById("tapel1").innerHTML=e}function simpanDataSekolah(){var e,a,t=new FormData;a=cekIdName(e="nama_sekolah"),t.append(e,a),a=cekIdName(e="npsn"),t.append(e,a),a=cekIdName(e="alamat"),t.append(e,a),a=cekIdName(e="kota"),t.append(e,a),a=cekIdName(e="propinsi"),t.append(e,a),a=cekIdName(e="tanggal"),t.append(e,a),a=cekIdName(e="kepsek"),t.append(e,a),a=cekIdName(e="nip"),t.append(e,a),a=cekIdName(e="usek"),t.append(e,a),a=cekIdName(e="unas"),t.append(e,a),a=cekIdName(e="tanggal"),t.append(e,a),a=cekIdName(e="kodepos"),t.append(e,a),a=cekIdName(e="telepon"),t.append(e,a),a=cekIdName(e="fax"),t.append(e,a),a=cekIdName(e="pangkat"),t.append(e,a),a=cekIdName(e="golongan"),t.append(e,a),a=cekIdName(e="tapel"),t.append(e,a),a=cekIdName(e="semester"),t.append(e,a),a=cekIdName(e="website"),t.append(e,a),a=cekIdName(e="email"),t.append(e,a),$.ajax({url:"simpanDataSekolah",type:"POST",data:t,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(e){var a=JSON.parse(e),t=a[0],l=a[1];if("error"!=t){alertify.success(l);swal("Sukses",l,"success")}else{l="Gagal menyimpan Data",alertify.error(l);swal("Gagal",l,"error")}$("#dataSekolahModal").modal("hide")}})}function showDataKKM(){$("#dataKKMModal").load("showDataKKM"),$("#dataKKMModal").modal("show")}function cekKKM(e){var a,t;a=e.id,t=e.value,"pred1_atas"===a?document.getElementById("pred2_bawah").value=t:"pred2_atas"===a?document.getElementById("pred3_bawah").value=t:"pred3_atas"===a?document.getElementById("pred4_bawah").value=t:"pred4_atas"===a&&(document.getElementById("pred5_bawah").value=t)}function simpanDataKKM(){var e,a,t=new FormData;a=cekIdName(e="kkm"),t.append(e,a),a=cekIdName(e="pred1_nama"),t.append(e,a),a=cekIdName(e="pred1_bawah"),t.append(e,a),a=cekIdName(e="pred1_atas"),t.append(e,a),a=cekIdName(e="pred2_nama"),t.append(e,a),a=cekIdName(e="pred2_bawah"),t.append(e,a),a=cekIdName(e="pred2_atas"),t.append(e,a),a=cekIdName(e="pred3_nama"),t.append(e,a),a=cekIdName(e="pred3_bawah"),t.append(e,a),a=cekIdName(e="pred3_atas"),t.append(e,a),a=cekIdName(e="pred4_nama"),t.append(e,a),a=cekIdName(e="pred4_bawah"),t.append(e,a),a=cekIdName(e="pred4_atas"),t.append(e,a),a=cekIdName(e="pred5_nama"),t.append(e,a),a=cekIdName(e="pred5_bawah"),t.append(e,a),a=cekIdName(e="pred5_atas"),t.append(e,a),$.ajax({url:"simpanDataKKM",type:"POST",data:t,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(e){var a=JSON.parse(e),t=a[0],l=a[1];if("error"!=t){alertify.success(l);swal("Sukses",l,"success")}else{l="Gagal menyimpan Data",alertify.error(l);swal("Gagal",l,"error")}$("#dataKKMModal").modal("hide")}})}function showSuketModal(e){$("#showSuketModal").load("showSuketModal?id="+e),$("#showSuketModal").modal("show")}$.ajaxSetup({xhrFields:{withCredentials:!0}});